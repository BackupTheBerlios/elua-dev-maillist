<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [eLua-dev] uIP speed
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/elua-dev/2012-February/index.html" >
   <LINK REL="made" HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20uIP%20speed&In-Reply-To=%3CCAL4-wQpNER%2B5xOXRYHkmTxER7kc-2QFEAyQudNMe99x_B%3DHigQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003317.html">
   <LINK REL="Next"  HREF="003319.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[eLua-dev] uIP speed</H1>
    <B>Martin Guy</B> 
    <A HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20uIP%20speed&In-Reply-To=%3CCAL4-wQpNER%2B5xOXRYHkmTxER7kc-2QFEAyQudNMe99x_B%3DHigQ%40mail.gmail.com%3E"
       TITLE="[eLua-dev] uIP speed">martinwguy at gmail.com
       </A><BR>
    <I>Sun Feb 19 21:40:55 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="003317.html">[eLua-dev] USB support on eLua
</A></li>
        <LI>Next message: <A HREF="003319.html">[eLua-dev] eLua on mbed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3318">[ date ]</a>
              <a href="thread.html#3318">[ thread ]</a>
              <a href="subject.html#3318">[ subject ]</a>
              <a href="author.html#3318">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi
   I'm seeing some strange slowdown effect while trying to measure th
network speed of TCP transfers on AVR32 eLua.  The Lua program listens
to a port, accepts a connection and then just read data and discards
it as fast as it can.  On a PC, then I send it data with
    cat /dev/zero | netcap 192.168.0.200 1234

The results are that every packet takes twice as long to receive as
the one before in a logarithmically increasing sequence. The Lua
program's output is:

Connected
Received 485 bytes in 3 seconds
Received 485 bytes in 6 seconds
Received 485 bytes in 12 seconds
Received 485 bytes in 24 seconds
Received 485 bytes in 48 seconds
Received 485 bytes in 96 seconds
Received 485 bytes in 120 seconds
Received 485 bytes in 120 seconds
Received 485 bytes in 120 seconds

and the times do correspond to these reports. Changing packet size,
even down to 1, makes no difference,

I have only been able to test this on Mizar32 and EVK1100 here, both
AVR32 platforms so am wondering whether this is normal when
stress-testing eLua-uIP, whether I'm using the net module wrongly or
whether I should be looking for an AVR32 platform-specific issue.

If someone could try this speed test on another platform and let me
know the results I'd be grateful.
The Lua network speed test program is attached

Cheers

    M
-------------- next part --------------
A non-text attachment was scrubbed...
Name: netdump.lua
Type: text/x-lua
Size: 660 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/elua-dev/attachments/20120219/67db4557/attachment.bin">https://lists.berlios.de/pipermail/elua-dev/attachments/20120219/67db4557/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003317.html">[eLua-dev] USB support on eLua
</A></li>
	<LI>Next message: <A HREF="003319.html">[eLua-dev] eLua on mbed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3318">[ date ]</a>
              <a href="thread.html#3318">[ thread ]</a>
              <a href="subject.html#3318">[ subject ]</a>
              <a href="author.html#3318">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/elua-dev">More information about the eLua-dev
mailing list</a><br>
</body></html>
