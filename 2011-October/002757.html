<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [eLua-dev] Increasing max UPVALUES
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/elua-dev/2011-October/index.html" >
   <LINK REL="made" HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20Increasing%20max%20UPVALUES&In-Reply-To=%3CCAL4-wQoMkxaYzn6F4w%3DQ5yz597okidioO3GBC%3DWuTKTAew5jGw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002768.html">
   <LINK REL="Next"  HREF="002758.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[eLua-dev] Increasing max UPVALUES</H1>
    <B>Martin Guy</B> 
    <A HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20Increasing%20max%20UPVALUES&In-Reply-To=%3CCAL4-wQoMkxaYzn6F4w%3DQ5yz597okidioO3GBC%3DWuTKTAew5jGw%40mail.gmail.com%3E"
       TITLE="[eLua-dev] Increasing max UPVALUES">martinwguy at gmail.com
       </A><BR>
    <I>Wed Oct  5 18:30:21 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002768.html">[eLua-dev] Expo of adc sequencer?
</A></li>
        <LI>Next message: <A HREF="002758.html">[eLua-dev] Increasing max UPVALUES
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2757">[ date ]</a>
              <a href="thread.html#2757">[ thread ]</a>
              <a href="subject.html#2757">[ subject ]</a>
              <a href="author.html#2757">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi
  One of our users is getting surprising failures in compilation
because he's written a function that accesses 12 global variables:
lua: /mmc/autorun.lua:53: function at line 45 has more than 10 upvalues

Rather than forcing people to learn about closures and local
variablesa and tables and stuff to work around this limit, is it OK if
I increase src/lua/luaconf.h::LUAI_MAXUPVALUES from 10 to the same
value as standard Lua, 60 so that any code that works in standard Lua
5.1.4 will also work in eLua?

  In Lua 4, this constant used to have an impact on the C stack usage,
but now it only requires 2 bytes of RAM per value during the parsing
of a function, which is just an extra 100 bytes total during parsing,
or 200 if you have functions within functions.

Bogdan, since you hold the sceptre of power? :)

     M

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002768.html">[eLua-dev] Expo of adc sequencer?
</A></li>
	<LI>Next message: <A HREF="002758.html">[eLua-dev] Increasing max UPVALUES
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2757">[ date ]</a>
              <a href="thread.html#2757">[ thread ]</a>
              <a href="subject.html#2757">[ subject ]</a>
              <a href="author.html#2757">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/elua-dev">More information about the eLua-dev
mailing list</a><br>
</body></html>
