<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [eLua-dev] GC Parameters &amp; Emergency Collection
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/elua-dev/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20GC%20Parameters%20%26%20Emergency%20Collection&In-Reply-To=%3C81fbe47d0905091240j753951ebr55740931528ec25%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000791.html">
   <LINK REL="Next"  HREF="000796.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[eLua-dev] GC Parameters &amp; Emergency Collection</H1>
    <B>Bogdan Marinescu</B> 
    <A HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20GC%20Parameters%20%26%20Emergency%20Collection&In-Reply-To=%3C81fbe47d0905091240j753951ebr55740931528ec25%40mail.gmail.com%3E"
       TITLE="[eLua-dev] GC Parameters &amp; Emergency Collection">bogdan.marinescu at gmail.com
       </A><BR>
    <I>Sat May  9 21:40:41 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000791.html">[eLua-dev] GC Parameters &amp; Emergency Collection
</A></li>
        <LI>Next message: <A HREF="000796.html">[eLua-dev] GC Parameters &amp; Emergency Collection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#792">[ date ]</a>
              <a href="thread.html#792">[ thread ]</a>
              <a href="subject.html#792">[ subject ]</a>
              <a href="author.html#792">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Hello eLua list,
</I>&gt;<i>
</I>&gt;<i> I am the creator of the Emergency Garbage Collection (EGC) patch for Lua
</I>&gt;<i> 5.1.x.  I joined this list because I have interest in using Lua VM with a
</I>&gt;<i> very low memory limit and I think that over laps with embedded systems.
</I>&gt;<i>
</I>&gt;<i> Attached is a version of the EGC patch for eLua SVN revision 281.  I just
</I>&gt;<i> had
</I>&gt;<i> to updated line numbers so it would apply cleanly to eLua without any
</I>&gt;<i> warnings.
</I>

Many, many thanks for this !!! I wanted to do this for quite a while now,
but didn't find the time to do it. Your patch is excellent for eLua and its
goals, so it's a Great Thing to have it running on our targets. Thanks
again.


&gt;<i> For testing &amp; debugging what tools do other people use?  Remote gdb over
</I>&gt;<i> serial?  I might be able to do more testing tomorrow, right now I am to
</I>&gt;<i> tired.
</I>

Personally I never used gdb over serial, although I have the required
hardware for some of the targets. Then again, I didn't really low-level
debugging, a LED or a serial connection did the job just fine for me. There
are also plans for an &quot;eLua simulator&quot; that would run *inside* an OS (so you
won't need the standalone version to test it), but this is quite vague at
the moment, and will have to wait at least until we give eLua its own libc.


&gt;<i> About 2/3 of the EGC patch is to make the resizing of the internal string
</I>&gt;<i> table &amp; hashpart of Lua table use less memory.  That is done by doing an
</I>&gt;<i> in-place resize of those tables.  If the table is shrinking then the nodes
</I>&gt;<i> are moved to the start of the table then realloc is called to shrink the
</I>&gt;<i> table.  If the table is growing then the realloc is done first before the
</I>&gt;<i> nodes are moved.  All of these changes are in lstring.c &amp; ltable.c and I
</I>&gt;<i> don't see any conflict with the change eLua made to vanilla Lua.
</I>

Yet another very good thing for eLua :)

I still think that low memory systems should use the EGC to fully utilize
&gt;<i> the
</I>&gt;<i> limited memory they have.
</I>

And I couldn't agree with you more, and this why I feel so excited for
having EGC in eLua. I'll have to think of a good batch of tests for making
your patch shine in its full potential :)

Best,
Bogdan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/elua-dev/attachments/20090509/e02a3bc6/attachment.html">https://lists.berlios.de/pipermail/elua-dev/attachments/20090509/e02a3bc6/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000791.html">[eLua-dev] GC Parameters &amp; Emergency Collection
</A></li>
	<LI>Next message: <A HREF="000796.html">[eLua-dev] GC Parameters &amp; Emergency Collection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#792">[ date ]</a>
              <a href="thread.html#792">[ thread ]</a>
              <a href="subject.html#792">[ subject ]</a>
              <a href="author.html#792">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/elua-dev">More information about the eLua-dev
mailing list</a><br>
</body></html>
