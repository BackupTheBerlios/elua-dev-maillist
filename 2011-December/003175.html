<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [eLua-dev] who is interested in increasing the flexibility of the serial module?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/elua-dev/2011-December/index.html" >
   <LINK REL="made" HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20who%20is%20interested%20in%20increasing%20the%20flexibility%20of%0A%20the%20serial%20module%3F&In-Reply-To=%3CCAJ%3DY9Y3QWuxj6GEX%2Bf8%2BhzR-KetO-NLk7tZdLOpksQdSDmzdtA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003169.html">
   <LINK REL="Next"  HREF="003164.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[eLua-dev] who is interested in increasing the flexibility of the serial module?</H1>
    <B>James Snyder</B> 
    <A HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20who%20is%20interested%20in%20increasing%20the%20flexibility%20of%0A%20the%20serial%20module%3F&In-Reply-To=%3CCAJ%3DY9Y3QWuxj6GEX%2Bf8%2BhzR-KetO-NLk7tZdLOpksQdSDmzdtA%40mail.gmail.com%3E"
       TITLE="[eLua-dev] who is interested in increasing the flexibility of the serial module?">jbsnyder at fanplastic.org
       </A><BR>
    <I>Mon Dec 19 22:07:47 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003169.html">[eLua-dev] who is interested in increasing the flexibility of the serial module?
</A></li>
        <LI>Next message: <A HREF="003164.html">[eLua-dev] A shield for stm32f4disco - sram
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3175">[ date ]</a>
              <a href="thread.html#3175">[ thread ]</a>
              <a href="subject.html#3175">[ subject ]</a>
              <a href="author.html#3175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Dec 17, 2011 at 11:00 AM, Nuccio Raciti &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">raciti.nuccio at gmail.com</A>&gt; wrote:
&gt;<i> Il 17/12/2011 17:51, Bogdan Marinescu ha scritto:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Sat, Dec 17, 2011 at 6:35 PM, Nuccio Raciti &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">raciti.nuccio at gmail.com</A>
</I>&gt;&gt;<i> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">raciti.nuccio at gmail.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160;Il 17/12/2011 17:00, Bogdan Marinescu ha scritto:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;Hi Nuccio,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;On Sat, Dec 17, 2011 at 3:28 PM, Nuccio Raciti
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">raciti.nuccio at gmail.com</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">raciti.nuccio at gmail.com</A>&gt;
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">raciti.nuccio at gmail.com</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">raciti.nuccio at gmail.com</A>&gt;&gt;&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; Hi All,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; potentially any eLua boards can have two or more UART,
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; for example Mizar will have two physical UART plus one
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;coming from
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; the USB (CDC UART),
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; so I think could be useful choice dynamically which UART
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;will be
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; used by the Console, by the TERM and so on....
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; So my proposal is to change dynamically (via eLua commands) the
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; assignment.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; What do you think?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;It can be done, but I don't think I understand the use
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;scenario. For example, let's assume that you want to change
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;the console UART using an eLua command. But, in order to give
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;an eLua command, you probably need to have eLua already up and
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;running on an UART (the one configured at compile time). So
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;what advantage would you have by changing the console UART at
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;runtime when you already have a functional one? On the other
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;hand, if you DON'T have a functional one, you probably won't
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;be able to issue the eLua command(s) to change it. Right? Or
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;I'm missing something?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;Best,
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;Bogdan
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;_______________________________________________
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;eLua-dev mailing list
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">eLua-dev at lists.berlios.de</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">eLua-dev at lists.berlios.de</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">https://lists.berlios.de/mailman/listinfo/elua-dev</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160;Hi Bogdan,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160;suppose you have the console on Uart0 and a VGA module (like
</I>&gt;&gt;<i> &#160; &#160;eluabrain or Mizar VGA module) on Uart1, now you could want to
</I>&gt;&gt;<i> &#160; &#160;send commands via the console but you could get terminal output on
</I>&gt;&gt;<i> &#160; &#160;VGA using TERM functionalities (using the VGA as a sort of
</I>&gt;&gt;<i> &#160; &#160;&quot;synoptic screen&quot;).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160;Also, I'm near to finish the IDE, inside it I have a console
</I>&gt;&gt;<i> &#160; &#160;terminal with ANSI/VT100 capability (a minimal set for now), so
</I>&gt;&gt;<i> &#160; &#160;the user can run some eLua programs as Hungman without Hardware.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160;It will be wonderful, if without build and reprogram the board, he
</I>&gt;&gt;<i> &#160; &#160;will able to see/run the same program on the VGA module.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160;So is more important to be able to change the &quot;TERM&quot; &#160;assignment,
</I>&gt;&gt;<i> &#160; &#160;but as we can have more UART also for the console, maybe we can
</I>&gt;&gt;<i> &#160; &#160;start to think also for it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160;For example if the USB is not connected the Console is on Uart0
</I>&gt;&gt;<i> &#160; &#160;(via first HW serial port), but if the USB-CDC Uart is connected,
</I>&gt;&gt;<i> &#160; &#160;the &quot;platform/xxx/platform.c&quot; should have the possibility to
</I>&gt;&gt;<i> &#160; &#160;change (just &#160;during the boot) the default Console.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160;I hope I have good exposed my point of view :-/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Perfectly, thank you. I understand where you're heading now. Implementing
</I>&gt;&gt;<i> this kind of thing shouldn't be much of an effort. The terminal subsystem
</I>&gt;&gt;<i> already has generic functions for input/output which are assigned at runtime
</I>&gt;&gt;<i> using pointers, so changing them is as easy as reinitializing the terminal
</I>&gt;&gt;<i> code by calling 'term_init' (never tried that, but it should work). The
</I>&gt;&gt;<i> console has an equivalent mechanism (src/newlib/getstd.c); if you change the
</I>&gt;&gt;<i> pointers to read/write functions you get yourself a new console (you
</I>&gt;&gt;<i> probably also need to empty the stdio buffers before changing the console).
</I>&gt;&gt;<i> I can help with specific implementation details if you need this.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Best,
</I>&gt;&gt;<i> Bogdan
</I>&gt;&gt;<i>
</I>&gt;<i> Yes, isn't hard to implement, maybe just matter to change a constant
</I>&gt;<i> &quot;CON_UART_ID&quot; with a more dynamic thing....but I have seen that &#160;some
</I>&gt;<i> changes are in common code, so we needs a common agreement...
</I>
I haven't tried this either, but it might be nice to have a few other
things like this be configurable after boot time or be insertable into
a configuration file that could live on a card or in flash and be
loaded at boot time.

We could significantly reduce the space of possible useful build
configurations for platforms where flash space isn't a major problem
by including all the needed components and making the options for
these configurable at boot like networking (DHCP vs Static), Console
type and endpoint (TCP vs UART vs virtual UART CDC).  I don't think we
would have to go crazy with it, but in addition to some of the usage
described in this thread, there are definitely times where I've found
myself making an array of builds to support some newer platforms like
Soldercore which can have an ethernet or CDC console and it might be
nice to make some of these options not dependent on the use of a full
toolchain.

I'd be willing to participate in some coding and discussion around
making (if nothing else) adjustable console settings.

-jsnyder

&gt;<i>
</I>&gt;<i> Best,
</I>&gt;<i> Nuccio
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160;Ciao,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160;Nuccio
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160;_______________________________________________
</I>&gt;&gt;<i> &#160; &#160;eLua-dev mailing list
</I>&gt;&gt;<i> &#160; &#160;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">eLua-dev at lists.berlios.de</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">eLua-dev at lists.berlios.de</A>&gt;
</I>&gt;&gt;<i> &#160; &#160;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">https://lists.berlios.de/mailman/listinfo/elua-dev</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> eLua-dev mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">eLua-dev at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">https://lists.berlios.de/mailman/listinfo/elua-dev</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> eLua-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">eLua-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">https://lists.berlios.de/mailman/listinfo/elua-dev</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003169.html">[eLua-dev] who is interested in increasing the flexibility of the serial module?
</A></li>
	<LI>Next message: <A HREF="003164.html">[eLua-dev] A shield for stm32f4disco - sram
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3175">[ date ]</a>
              <a href="thread.html#3175">[ thread ]</a>
              <a href="subject.html#3175">[ subject ]</a>
              <a href="author.html#3175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/elua-dev">More information about the eLua-dev
mailing list</a><br>
</body></html>
