<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [eLua-dev] ADC platform interface proposal
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/elua-dev/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20ADC%20platform%20interface%20proposal&In-Reply-To=%3C81fbe47d0901202338h711f8b95qcbd8ce0e0f4e88f2%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000295.html">
   <LINK REL="Next"  HREF="000297.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[eLua-dev] ADC platform interface proposal</H1>
    <B>Bogdan Marinescu</B> 
    <A HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20ADC%20platform%20interface%20proposal&In-Reply-To=%3C81fbe47d0901202338h711f8b95qcbd8ce0e0f4e88f2%40mail.gmail.com%3E"
       TITLE="[eLua-dev] ADC platform interface proposal">bogdan.marinescu at gmail.com
       </A><BR>
    <I>Wed Jan 21 08:38:43 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000295.html">[eLua-dev] ADC platform interface proposal
</A></li>
        <LI>Next message: <A HREF="000297.html">[eLua-dev] ADC platform interface proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#296">[ date ]</a>
              <a href="thread.html#296">[ thread ]</a>
              <a href="subject.html#296">[ subject ]</a>
              <a href="author.html#296">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Jan 19, 2009 at 10:06 PM, James Snyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">jbsnyder at fanplastic.org</A>&gt; wrote:
&gt;<i> I've got an initial attempt at the ADC module sketched out, and I'll check it in as soon as I make a few more modifications to clean things up and make sure I haven't broken builds for platforms that don't have ADC implementations written yet.  So far it will happily do single shot readings, and the voltages I'm putting in seem to correlate with what I'd expect.
</I>
Good news, thanks! :)

&gt;<i> As things stand, I'm returning the raw integer value provided off of the ADC.  Should the ADC module know what range of voltage inputs is and attempt to convert to say, millivolts, when a sample is returned?  For lower bit depths, like 10 bits, having the result returned as u16 in millivolts wouldn't decimate the resolution of the result, however at higher resolutions converting a raw integer result to mV might result in loss of precision without floating point.  This is one of those &quot;level of abstraction&quot; questions that might be valuable to discuss.  I suppose, one way to handle things would be to have this functionality be optional, but which should be the default?
</I>
Let's return the ADC readings for now. I want this to work on the
integer-only Lua as well (maybe with a fixed point library), so I'm
trying to avoid floating point numbers in the platform interface as
much as possible.

&gt;<i> Another item is:  If I do a single shot conversion, and then subsequently call the function to get a sample, should default behavior be to keep returning the last result?  I've found that at least with the Stellaris platform the results are stored in a FIFO, so the first time I get my result, and the second time I get a default value (presumably telling me that the FIFO is empty).  Any thoughts?
</I>
I'm not sure I understand this. If you call a function to get a
sample, it should read a new sample and return it. What would be the
point of returning the previous sample?

Best,
Bogdan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000295.html">[eLua-dev] ADC platform interface proposal
</A></li>
	<LI>Next message: <A HREF="000297.html">[eLua-dev] ADC platform interface proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#296">[ date ]</a>
              <a href="thread.html#296">[ thread ]</a>
              <a href="subject.html#296">[ subject ]</a>
              <a href="author.html#296">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/elua-dev">More information about the eLua-dev
mailing list</a><br>
</body></html>
