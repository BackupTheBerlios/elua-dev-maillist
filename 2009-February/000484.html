<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [eLua-dev] Microcontroller Filesystem
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/elua-dev/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20Microcontroller%20Filesystem&In-Reply-To=%3C00d801c9910b%240c891cf0%24259b56d0%24%40hind%40zen.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000479.html">
   <LINK REL="Next"  HREF="000473.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[eLua-dev] Microcontroller Filesystem</H1>
    <B>John Hind</B> 
    <A HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20Microcontroller%20Filesystem&In-Reply-To=%3C00d801c9910b%240c891cf0%24259b56d0%24%40hind%40zen.co.uk%3E"
       TITLE="[eLua-dev] Microcontroller Filesystem">john.hind at zen.co.uk
       </A><BR>
    <I>Tue Feb 17 15:21:39 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000479.html">[eLua-dev] eeprom
</A></li>
        <LI>Next message: <A HREF="000473.html">[eLua-dev] Large ADC Commit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#484">[ date ]</a>
              <a href="thread.html#484">[ thread ]</a>
              <a href="subject.html#484">[ subject ]</a>
              <a href="author.html#484">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The discussion of the eLua file system and autoruns is very interesting.
Sorry if this goes over old ground but I have not actually started working
with eLua yet (planning to start with the next release - I'm waiting to see
which hardware to buy!)

 

One idea I had when I was working on this on my own was to dispense with a
file system altogether and use persistence instead. You would load source
code over a network or serial link into a RAM buffer and compile it from
there. Then there would be a feature added to Lua to back functions in
tables off into flash memory in dump (byte-code) format. The value in the
table would be replaced by a userdata containing a pointer into the flash. A
__call metamethod on the userdata would recover the function into RAM
whenever it was called (this could be a caching system so it would be
retained in RAM until flushed). Alternatively, the runtime could be modified
to execute the function in flash. There could be some flags on each function
dumped to flash including a &quot;run at boot&quot; flag. On boot, the system would
search the flash function store and run any functions with this flag set.

 

This scheme should be much simpler and less resource hungry than a file
system (it effectively uses Lua tables as the directory structure), easy to
make writable and also by virtue of the cachability, adaptable to slower
serial off-chip memory. Of course, it only stores functions - see my
&quot;engram&quot; proposal on the WiKi for where I was headed with this!

 

Sorry again if I've just re-invented the wheel!

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/elua-dev/attachments/20090217/75edc628/attachment.html">https://lists.berlios.de/pipermail/elua-dev/attachments/20090217/75edc628/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3200 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/elua-dev/attachments/20090217/75edc628/attachment.bin">https://lists.berlios.de/pipermail/elua-dev/attachments/20090217/75edc628/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000479.html">[eLua-dev] eeprom
</A></li>
	<LI>Next message: <A HREF="000473.html">[eLua-dev] Large ADC Commit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#484">[ date ]</a>
              <a href="thread.html#484">[ thread ]</a>
              <a href="subject.html#484">[ subject ]</a>
              <a href="author.html#484">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/elua-dev">More information about the eLua-dev
mailing list</a><br>
</body></html>
