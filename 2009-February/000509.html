<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [eLua-dev] Large ADC Commit
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/elua-dev/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20Large%20ADC%20Commit&In-Reply-To=%3C92ab989c0902171536l41a97ca3sde9aa3baf9e303ac%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000511.html">
   <LINK REL="Next"  HREF="000512.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[eLua-dev] Large ADC Commit</H1>
    <B>Andre Carregal</B> 
    <A HREF="mailto:elua-dev%40lists.berlios.de?Subject=Re%3A%20%5BeLua-dev%5D%20Large%20ADC%20Commit&In-Reply-To=%3C92ab989c0902171536l41a97ca3sde9aa3baf9e303ac%40mail.gmail.com%3E"
       TITLE="[eLua-dev] Large ADC Commit">carregal at pobox.com
       </A><BR>
    <I>Wed Feb 18 00:36:52 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000511.html">[eLua-dev] Large ADC Commit
</A></li>
        <LI>Next message: <A HREF="000512.html">[eLua-dev] Large ADC Commit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#509">[ date ]</a>
              <a href="thread.html#509">[ thread ]</a>
              <a href="subject.html#509">[ subject ]</a>
              <a href="author.html#509">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Feb 17, 2009 at 8:05 PM, James Snyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">jbsnyder at fanplastic.org</A>&gt; wrote:
&gt;<i> Ok, so here's a breakdown, that I'm thinking of
</I>&gt;<i> a = adc.getsamples(0)
</I>&gt;<i> returns all pending samples on channel 0 as a table
</I>&gt;<i> a = adc.getsamples(0,4)
</I>&gt;<i> returns 4 pending samples
</I>&gt;<i> adc.getsamples(0,a)
</I>&gt;<i> appends any pending samples in the buffer to a
</I>&gt;<i> adc.getsamples(0,3,a)
</I>&gt;<i> appends 3 samples in the buffer to a starting after the samples already in
</I>&gt;<i> the table
</I>&gt;<i> adc.getsamples(0,3,a,2)
</I>&gt;<i> inserts 3 samples to a, starting at index 2
</I>&gt;<i> It's horribly complicated, but there aren't any ambiguous cases in terms of
</I>&gt;<i> the parameters being passed, and you can still use it with a really simple
</I>&gt;<i> call.
</I>
I hope I'm not being too nosy and I apologize if this has been already
discussed here... but have you considered splitting the functionality
into two functions?

Maybe you could use

a = adc.getsamples(chan, num)

and

adc.addsamples(chan, num, tab)

The first would always return a table with num samples, while the
second would always append num samples to the &quot;tab&quot; table.

BTW, is the offset parameter really important? Wouldn't reloading
samples over a previous buffer be too error prone? That's why I'm
suggesting just an append semantics...

Another point to consider would be the need to pass the channel
number. An alternative would be to make something like:

c = adc.channel(0)
a = c:getsamples(10)

where the channel itself would be considered a first class object.

Finally, have you considered using an API closer to LTN12? This may
facilitate the future use of filters over a sample stream, if there is
such a thing... :o)
<A HREF="http://lua-users.org/wiki/FiltersSourcesAndSinks">http://lua-users.org/wiki/FiltersSourcesAndSinks</A>

Andr&#233;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000511.html">[eLua-dev] Large ADC Commit
</A></li>
	<LI>Next message: <A HREF="000512.html">[eLua-dev] Large ADC Commit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#509">[ date ]</a>
              <a href="thread.html#509">[ thread ]</a>
              <a href="subject.html#509">[ subject ]</a>
              <a href="author.html#509">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/elua-dev">More information about the eLua-dev
mailing list</a><br>
</body></html>
